<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Sending raw email using the Amazon SES API v2 - Amazon Simple Email Service</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="send-email-raw" /><meta name="default_state" content="send-email-raw" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ses/latest/dg/send-email-raw.html" /><meta name="description" content="Use the Amazon SES raw email interface to send highly customized messages such as messages that contain attachments." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Simple Email Service" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Create a highly-scalable and flexible email sending and receiving platform using Amazon SES. This Developer Guide provides information and procedures for configuring your Amazon SES account to send and receive email." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ses/latest/dg/send-email-raw.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/ses/latest/dg/send-email-raw.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/ses/latest/dg/send-email-raw.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/ses/latest/dg/send-email-raw.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/ses/latest/dg/send-email-raw.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/ses/latest/dg/send-email-raw.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/ses/latest/dg/send-email-raw.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/ses/latest/dg/send-email-raw.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/ses/latest/dg/send-email-raw.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/ses/latest/dg/send-email-raw.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/ses/latest/dg/send-email-raw.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/ses/latest/dg/send-email-raw.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/ses/latest/dg/send-email-raw.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/ses/latest/dg/send-email-raw.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/ses/latest/dg/send-email-raw.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/ses/latest/dg/send-email-raw.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/ses/latest/dg/send-email-raw.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/ses/latest/dg/send-email-raw.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/ses/latest/dg/send-email-raw.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/ses/latest/dg/send-email-raw.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/ses/latest/dg/send-email-raw.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/ses/latest/dg/send-email-raw.html" hreflang="x-default" /><meta name="feedback-item" content="SES" /><meta name="this_doc_product" content="Amazon Simple Email Service" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'ses'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Sending raw email using the Amazon SES API v2" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Sending raw email using the Amazon SES API v2 - Amazon Simple Email Service</title><meta name="pdf" content="/pdfs/ses/latest/dg/ses-dg.pdf#send-email-raw" /><meta name="forums" content="https://repost.aws/tags/TAAR3LByLsRUCXpQk5biG7FQ" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SES&amp;topic_url=https://docs.aws.amazon.com/en_us/ses/latest/dg/send-email-raw.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=https://docs.aws.amazon.com/en_us/ses/latest/dg/send-email-raw.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=https://docs.aws.amazon.com/en_us/ses/latest/dg/send-email-raw.html" /><meta name="keywords" content="SES,Amazon SES,SES v2,Amazon Simple Email Service,email" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Simple Email Service",
        "item" : "https://docs.aws.amazon.com/ses/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/ses/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Set up email sending with Amazon SES",
        "item" : "https://docs.aws.amazon.com/ses/latest/dg/send-email.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Using the Amazon SES API to send email",
        "item" : "https://docs.aws.amazon.com/ses/latest/dg/send-email-api.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Sending raw email using the Amazon SES API v2",
        "item" : "https://docs.aws.amazon.com/ses/latest/dg/send-email-api.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/ses/latest/dg/ses-dg.pdf#send-email-raw" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="/index.html">Documentation</a><a href="/ses/index.html">Amazon Simple Email Service</a><a href="Welcome.html">Developer Guide</a></div><div id="page-toc-src"><a href="#send-email-raw-headers">About email header fields</a><a href="#send-email-raw-mime">Raw email MIME</a><a href="#send-email-raw-api">Sending raw email using the Amazon SES API v2
            </a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="send-email-raw">Sending raw email using the Amazon SES API v2</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can use the Amazon SES API v2 <code class="code">SendEmail</code> operation with the content type
        specified as <code class="code">raw</code> to send customized messages to your recipients using the raw
        email format.</p>
        <h2 id="send-email-raw-headers">About email header fields</h2>
        <p>Simple Mail Transfer Protocol (SMTP) specifies how email messages are to be sent by
            defining the mail envelope and some of its parameters, but it does not concern itself
            with the content of the message. Instead, the Internet Message Format (<a href="https://www.ietf.org/rfc/rfc5322.txt" rel="noopener noreferrer" target="_blank"><span>RFC 5322</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>) defines how the message
            is to be constructed.</p>
        <p>With the Internet Message Format specification, every email message consists of a
            header and a body. The header consists of message metadata, and the body contains the
            message itself. For more information about email headers and bodies, see <a href="./send-email-concepts-email-format.html">Email format in Amazon SES</a>.</p>
     
        <h2 id="send-email-raw-mime">Using raw email MIME message construction</h2>
        <p>The SMTP protocol was originally designed to send email messages that only contained
            7-bit ASCII characters. This specification makes SMTP insufficient for non-ASCII text
            encodings (such as Unicode), binary content, or attachments. The Multipurpose Internet
            Mail Extensions standard (MIME) was developed to make it possible to send many other
            kinds of content using SMTP.</p>
        <p>The MIME standard works by breaking the message body into multiple parts and then
            specifying what is to be done with each part. For example, one part of an email message
            body might be plain text, while another might be HTML. In addition, MIME allows email
            messages to contain one or more attachments. Message recipients can view the attachments
            from within their email clients, or they can save the attachments.</p>
        <p>The message header and content are separated by a blank line. Each part of the email
            is separated by a boundary, a string of characters that denotes the beginning and ending
            of each part.</p>
        <p>The multipart message in the following example contains a text and an HTML part, and
            an attachment. The attachment should be placed just below the <a href="#send-email-mime-encoding-files">attachment headers</a> and is most often
            encoded in <code class="code">base64</code> as shown in this example.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (none)--><code class="nohighlight">From: "Sender Name" &lt;sender@example.com&gt;
To: recipient@example.com
Subject: Customer service contact info
Content-Type: multipart/mixed;
    boundary="a3f166a86b56ff6c37755292d690675717ea3cd9de81228ec2b76ed4a15d6d1a"

--a3f166a86b56ff6c37755292d690675717ea3cd9de81228ec2b76ed4a15d6d1a
Content-Type: multipart/alternative;
    boundary="sub_a3f166a86b56ff6c37755292d690675717ea3cd9de81228ec2b76ed4a15d6d1a"

--sub_a3f166a86b56ff6c37755292d690675717ea3cd9de81228ec2b76ed4a15d6d1a
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Please see the attached file for a list of customers to contact.

--sub_a3f166a86b56ff6c37755292d690675717ea3cd9de81228ec2b76ed4a15d6d1a
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello!&lt;/h1&gt;
&lt;p&gt;Please see the attached file for a list of customers to contact.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;

--sub_a3f166a86b56ff6c37755292d690675717ea3cd9de81228ec2b76ed4a15d6d1a--

--a3f166a86b56ff6c37755292d690675717ea3cd9de81228ec2b76ed4a15d6d1a
Content-Type: text/plain; name="customers.txt"
Content-Description: customers.txt
Content-Disposition: attachment;filename="customers.txt";
    creation-date="Sat, 05 Aug 2017 19:35:36 GMT";
Content-Transfer-Encoding: base64

SUQsRmlyc3ROYW1lLExhc3ROYW1lLENvdW50cnkKMzQ4LEpvaG4sU3RpbGVzLENhbmFkYQo5MjM4
OSxKaWUsTGl1LENoaW5hCjczNCxTaGlybGV5LFJvZHJpZ3VleixVbml0ZWQgU3RhdGVzCjI4OTMs
QW5heWEsSXllbmdhcixJbmRpYQ==

--a3f166a86b56ff6c37755292d690675717ea3cd9de81228ec2b76ed4a15d6d1a--
</code></pre>

        <p>The content type for the message is <code class="code">multipart/mixed</code>, which indicates that
            the message has many parts (in this example, a body and an attachment), and the
            receiving client must handle each part separately.</p>

        <p>Nested within the body section is a second part that uses the
                <code class="code">multipart/alternative</code> content type. This content type indicates that
            each part contains alternative versions of the same content (in this case, a text
            version and an HTML version). If the recipient's email client can display HTML content,
            then it shows the HTML version of the message body. If the recipient's email client
            can't display HTML content, then it shows the plain text version of the message
            body.</p>

        <p>Both versions of the message also contain an attachment (in this case, a short text
            file that contains some customer names).</p>

        <p>When you nest a MIME part within another part, as in this example, the nested part
            must use a <code class="code">boundary</code> parameter that is distinct from the
                <code class="code">boundary</code> parameter in the parent part. These boundaries should be
            unique strings of characters. To define a boundary between MIME parts, type two hyphens
            (--) followed by the boundary string. At the end of a MIME part, place two hyphens at
            both the beginning and the end of the boundary string.</p>

        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>A message cannot have more than 500 MIME parts.</p></div></div>

         
            <h3 id="send-email-mime-encoding">MIME Encoding</h3>


            <p>To maintain compatibility with older systems, Amazon SES honors the 7-bit ASCII
                limitation of SMTP as defined in <a href="https://tools.ietf.org/html/rfc2821" rel="noopener noreferrer" target="_blank"><span>RFC 2821</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. If you want to send content that contains non-ASCII
                characters, you must encode those characters into a format that uses 7-bit ASCII
                characters.</p>

             
                <h4 id="send-email-mime-encoding-addresses">Email addresses</h4>
                <p>The email address string must be 7-bit ASCII. If you want to send to or from
                    email addresses that contain Unicode characters in the domain part of an
                    address, you must encode the domain using Punycode. Punycode is not permitted in
                    the local part of the email address (the part before the @ sign) nor in the
                    "friendly from" name. If you want to use Unicode characters in the "friendly
                    from" name, you must encode the "friendly from" name using MIME encoded-word
                    syntax, as described in this section. For more information about Punycode, see
                        <a href="http://tools.ietf.org/html/rfc3492" rel="noopener noreferrer" target="_blank"><span>RFC 3492</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                
                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This rule only applies to email addresses that you specify in the message
                        envelope, not the message headers. When you use the Amazon SES API v2
                            <code class="code">SendEmail</code> operation, the addresses you specify in the
                            <code class="code">Source</code> and <code class="code">Destinations</code>
                        parameters define the envelope sender and recipients, respectively.</p></div></div>
                
             
             
                <h4 id="send-email-mime-encoding-headers">Email headers</h4>
                <p>To encode a message header, use MIME encoded-word syntax. MIME encoded word
                    syntax uses the following format:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (none)--><code class="nohighlight">=?<code class="replaceable">charset</code>?<code class="replaceable">encoding</code>?<code class="replaceable">encoded-text</code>?=</code></pre>
                <p>The value of <code class="code"><code class="replaceable">encoding</code></code> can be either
                        <code class="code">Q</code> or <code class="code">B</code>. If the value of encoding is
                    <code class="code">Q</code>, then the value
                        <code class="code"><code class="replaceable">encoded-text</code></code> has to use Q-encoding.
                    If the value of encoding is <code class="code">B</code>, then the value of
                            <code class="code"><code class="replaceable">encoded-text</code></code> has to use base64
                    encoding.</p>
                <p>For example, if you want to use the string
                    "Як ти поживаєш?"
                    in the subject line of an email, you can use either of the following
                    encodings:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><span class="topcom">Q-encoding</span></p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (none)--><code class="nohighlight">=?utf-8?Q?=D0=AF=D0=BA_=D1=82=D0=B8_=D0=BF=D0=BE=D0=B6=D0=B8=D0=B2=D0=B0=D1=94=D1=88=3F?=</code></pre>
                    </li><li class="listitem">
                        <p><span class="topcom">Base64 encoding</span></p>

                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (none)--><code class="nohighlight">=?utf-8?B?0K/QuiDRgtC4INC/0L7QttC40LLQsNGU0Yg/?=</code></pre>
                    </li></ul></div>
                <p>For more information about Q-encoding, see <a href="https://tools.ietf.org/html/rfc2047" rel="noopener noreferrer" target="_blank"><span>RFC 2047</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. For more
                    information about base64 encoding, see <a href="https://tools.ietf.org/html/rfc2045" rel="noopener noreferrer" target="_blank"><span>RFC 2045</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
             
             
                <h4 id="send-email-mime-encoding-body">Message body</h4>
                <p>To encode the body of a message, you can use quoted-printable encoding or
                    base64 encoding. Then, use the <code class="code">Content-Transfer-Encoding</code>
                    header to indicate which encoding scheme you used.</p>
                <p>For example, assume the body of your message contains the following text: </p>
                <p>१९७२ मे रे
                    टॉमलिंसन ने
                    पहला ई-मेल
                    संदेश भेजा |
                    रे टॉमलिंसन
                    ने ही
                    सर्वप्रथम @
                    चिन्ह का चयन
                    किया और इन्ही
                    को ईमेल का
                    आविष्कारक
                    माना जाता है</p>
                <p>If you choose to encode this text using base64 encoding, first specify the
                    following header:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (none)--><code class="nohighlight">Content-Transfer-Encoding: base64</code></pre>
                <p>Then, in the body section of the email, include the base64-encoded
                    text:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (none)--><code class="nohighlight">4KWn4KWv4KWt4KWoIOCkruClhyDgpLDgpYcg4KSf4KWJ4KSu4KSy4KS/4KSC4KS44KSoIOCkqOCl
hyDgpKrgpLngpLLgpL4g4KSILeCkruClh+CksiDgpLjgpILgpKbgpYfgpLYg4KSt4KWH4KSc4KS+
IHwg4KSw4KWHIOCkn+ClieCkruCksuCkv+CkguCkuOCkqCDgpKjgpYcg4KS54KWAIOCkuOCksOCl
jeCkteCkquCljeCksOCkpeCkriBAIOCkmuCkv+CkqOCljeCkuSDgpJXgpL4g4KSa4KSv4KSoIOCk
leCkv+Ckr+CkviDgpJTgpLAg4KSH4KSo4KWN4KS54KWAIOCkleCliyDgpIjgpK7gpYfgpLIg4KSV
4KS+IOCkhuCkteCkv+Ckt+CljeCkleCkvuCksOCklSDgpK7gpL7gpKjgpL4g4KSc4KS+4KSk4KS+
IOCkueCliAo=</code></pre>
                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>In some cases, you can use the 8bit <code class="code">Content-Transfer-Encoding</code>
                        in messages that you send using Amazon SES. However, if Amazon SES has to make any
                        changes to your messages (for example, when you use <a href="./faqs-metrics.html">open and click tracking</a>), 8-bit-encoded
                        content might not appear correctly when it arrives in recipients' inboxes.
                        For this reason, you should always encode content that isn't 7-bit
                        ASCII.</p></div></div>
             
             
                <h4 id="send-email-mime-encoding-files">File attachments</h4>
                <p>To attach a file to an email, you have to encode the attachment using base64
                    encoding. Attachments are typically placed in dedicated MIME message parts,
                    which include the following headers:</p>
                <div class="itemizedlist">
                     
                     
                     
                     

                <ul class="itemizedlist"><li class="listitem">
                        <p><span class="topcom">Content-Type</span> – The file type of
                            the attachment. The following are examples of common MIME Content-Type
                            declarations:</p>
                        <div class="itemizedlist">
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><span class="topcom">Plain text file</span> –
                                        <code class="code">Content-Type: text/plain;
                                    name="sample.txt"</code></p>
                            </li><li class="listitem">
                                <p><span class="topcom">Microsoft Word Document</span>
                                    – <code class="code">Content-Type: application/msword;
                                        name="document.docx"</code></p>
                            </li><li class="listitem">
                                <p><span class="topcom">JPG image</span> –
                                        <code class="code">Content-Type: image/jpeg;
                                    name="photo.jpeg"</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p><span class="topcom">Content-Disposition</span> – Specifies
                            how the recipient's email client should handle the content. For
                            attachments, this value is <code class="code">Content-Disposition:
                            attachment</code>.</p>
                    </li><li class="listitem">
                        <p><span class="topcom">Content-Transfer-Encoding</span> – The
                            scheme that was used to encode the attachment. For file attachments,
                            this value is almost always <code class="code">base64</code>.</p>
                    </li><li class="listitem">
                        <p><span class="topcom">The encoded attachment</span> – You
                            must encode the actual attachment and include it in the body below the
                            attachment headers as <a href="#send-email-raw-mime">shown in the
                                example</a>.</p>
                    </li></ul></div>
                <p>Amazon SES accepts most common file types. For a list of file types that Amazon SES
                    doesn't accept, see <a href="./attachments.html#mime-types">SES unsupported attachment types</a>.</p>
             
         
     
        <h2 id="send-email-raw-api">Sending raw email using the Amazon SES API v2</h2>
        <p>The Amazon SES API v2 provides the <code class="code">SendEmail</code> action, which lets you compose and
            send an email message in the format that you specify when you set the content type to
            either simple, raw, or templated. For a complete description, see <a href="https://docs.aws.amazon.com/ses/latest/APIReference-V2/API_SendEmail.html"><code class="code">SendEmail</code></a>. The following example will specify the content
            type as <code class="code">raw</code> to send a messages using the raw email format.</p>

        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For tips on how to increase your email sending speed when you make multiple calls
                to <code class="code">SendEmail</code>, see <a href="./troubleshoot-throughput-problems.html">Increasing throughput with Amazon SES</a>.</p></div></div>

        <p>The message body must contain a properly formatted, raw email message, with
            appropriate header fields and message body encoding. Although it's possible to construct
            the raw message manually within an application, it's much easier to do so using existing
            mail libraries. </p>
        <awsdocs-tabs><dl style="display: none">
            <dt>Java</dt><dd tab-id="java">
                    <p>The following code example shows how to use the <a href="https://javaee.github.io/javamail/" rel="noopener noreferrer" target="_blank"><span>JavaMail</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> library and
                        the <a href="https://aws.amazon.com/sdk-for-java" rel="noopener noreferrer" target="_blank"><span>AWS SDK for Java</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to compose
                        and send a raw email.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (java)--><code class="java ">package com.amazonaws.samples;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.PrintStream;
import java.nio.ByteBuffer;
import java.util.Properties;

// JavaMail libraries. Download the JavaMail API 
// from https://javaee.github.io/javamail/
import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Session;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

// AWS SDK libraries. Download the AWS SDK for Java 
// from https://aws.amazon.com/sdk-for-java
import com.amazonaws.regions.Regions;
import com.amazonaws.services.simpleemail.AmazonSimpleEmailService;
import com.amazonaws.services.simpleemail.AmazonSimpleEmailServiceClientBuilder;
import com.amazonaws.services.simpleemail.model.RawMessage;
import com.amazonaws.services.simpleemail.model.SendRawEmailRequest;

public class AmazonSESSample <span>{</span>

	// Replace sender@example.com with your "From" address.
	// This address must be verified with Amazon SES.
	private static String SENDER = "<code class="replaceable">Sender Name</code> &lt;<code class="replaceable">sender@example.com</code>&gt;";

	// Replace recipient@example.com with a "To" address. If your account 
	// is still in the sandbox, this address must be verified.
	private static String RECIPIENT = "<code class="replaceable">recipient@example.com</code>";

	// Specify a configuration set. If you do not want to use a configuration
	// set, comment the following variable, and the 
	// ConfigurationSetName=CONFIGURATION_SET argument below.
	private static String CONFIGURATION_SET = "<code class="replaceable">ConfigSet</code>";

	// The subject line for the email.
	private static String SUBJECT = "Customer service contact info";

	// The full path to the file that will be attached to the email.
	// If you're using Windows, escape backslashes as shown in this variable.
	private static String ATTACHMENT = "C:\\Users\\sender\\customers-to-contact.xlsx";

	// The email body for recipients with non-HTML email clients.
	private static String BODY_TEXT = "Hello,\r\n"
                                        + "Please see the attached file for a list "
                                        + "of customers to contact.";

	// The HTML body of the email.
	private static String BODY_HTML = "&lt;html&gt;"
                                        + "&lt;head&gt;&lt;/head&gt;"
                                        + "&lt;body&gt;"
                                        + "&lt;h1&gt;Hello!&lt;/h1&gt;"
                                        + "&lt;p&gt;Please see the attached file for a "
                                        + "list of customers to contact.&lt;/p&gt;"
                                        + "&lt;/body&gt;"
                                        + "&lt;/html&gt;";

    public static void main(String[] args) throws AddressException, MessagingException, IOException <span>{</span>
            	
    	Session session = Session.getDefaultInstance(new Properties());
        
        // Create a new MimeMessage object.
        MimeMessage message = new MimeMessage(session);
        
        // Add subject, from and to lines.
        message.setSubject(SUBJECT, "UTF-8");
        message.setFrom(new InternetAddress(SENDER));
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(RECIPIENT));

        // Create a multipart/alternative child container.
        MimeMultipart msg_body = new MimeMultipart("alternative");
        
        // Create a wrapper for the HTML and text parts.        
        MimeBodyPart wrap = new MimeBodyPart();
        
        // Define the text part.
        MimeBodyPart textPart = new MimeBodyPart();
        textPart.setContent(BODY_TEXT, "text/plain; charset=UTF-8");
                
        // Define the HTML part.
        MimeBodyPart htmlPart = new MimeBodyPart();
        htmlPart.setContent(BODY_HTML,"text/html; charset=UTF-8");
                
        // Add the text and HTML parts to the child container.
        msg_body.addBodyPart(textPart);
        msg_body.addBodyPart(htmlPart);
        
        // Add the child container to the wrapper object.
        wrap.setContent(msg_body);
        
        // Create a multipart/mixed parent container.
        MimeMultipart msg = new MimeMultipart("mixed");
        
        // Add the parent container to the message.
        message.setContent(msg);
        
        // Add the multipart/alternative part to the message.
        msg.addBodyPart(wrap);
        
        // Define the attachment
        MimeBodyPart att = new MimeBodyPart();
        DataSource fds = new FileDataSource(ATTACHMENT);
        att.setDataHandler(new DataHandler(fds));
        att.setFileName(fds.getName());
        
        // Add the attachment to the message.
        msg.addBodyPart(att);

        // Try to send the email.
        try <span>{</span>
            System.out.println("Attempting to send an email through Amazon SES "
                              +"using the AWS SDK for Java...");

            // Instantiate an Amazon SES client, which will make the service 
            // call with the supplied AWS credentials.
            AmazonSimpleEmailService client = 
                    AmazonSimpleEmailServiceClientBuilder.standard()
                    // Replace US_WEST_2 with the AWS Region you're using for
                    // Amazon SES.
                    .withRegion(Regions.US_WEST_2).build();
            
            // Print the raw email content on the console
            PrintStream out = System.out;
            message.writeTo(out);

            // Send the email.
            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
            message.writeTo(outputStream);
            RawMessage rawMessage = 
            		new RawMessage(ByteBuffer.wrap(outputStream.toByteArray()));

            SendRawEmailRequest rawEmailRequest = 
            		new SendRawEmailRequest(rawMessage)
            		    .withConfigurationSetName(CONFIGURATION_SET);
            
            client.sendRawEmail(rawEmailRequest);
            System.out.println("Email sent!");
        // Display an error if something goes wrong.
        } catch (Exception ex) <span>{</span>
          System.out.println("Email Failed");
            System.err.println("Error message: " + ex.getMessage());
            ex.printStackTrace();
        }
    }
}</code></pre>
                </dd>
            <dt>Python</dt><dd tab-id="python">
                    <p>The following code example shows how to use the <a href="https://docs.python.org/2/library/email.mime.html" rel="noopener noreferrer" target="_blank"><span>Python
                            email.mime</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> packages and the <a href="https://aws.amazon.com/sdk-for-python" rel="noopener noreferrer" target="_blank"><span>AWS SDK for Python (Boto)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to compose and
                        send a raw email.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><!--DEBUG: cli (py)--><code class="py ">import json
import boto3
from botocore.exceptions import ClientError
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
from email.mime.application import MIMEApplication
import os

def boto3_rawemailv2():
    SENDER = "Sender &lt;sender@example.com&gt;"
    RECIPIENT = "recipient@example.com"
    CONFIGURATION_SET = "ConfigSet"
    AWS_REGION = "us-east-1"
    SUBJECT = "Customer service contact info"
    ATTACHMENT = "path/to/customers-to-contact.xlsx"
    BODY_TEXT = "Hello,\r\nPlease see the attached file for a list of customers to contact."

    # The HTML body of the email.
    BODY_HTML = """\
    &lt;html&gt;
    &lt;head/&gt;
    &lt;body&gt;
    &lt;h1&gt;Hello!&lt;/h1&gt;
    &lt;p&gt;Please see the attached file for a list of customers to contact.&lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
    """

    # The character encoding for the email.
    CHARSET = "utf-8"
    msg = MIMEMultipart('mixed')
    # Add subject, from and to lines.
    msg['Subject'] = SUBJECT 
    msg['From'] = SENDER 
    msg['To'] = RECIPIENT
    
    # Create a multipart/alternative child container.
    msg_body = MIMEMultipart('alternative')
    
    # Encode the text and HTML content and set the character encoding. This step is
    # necessary if you're sending a message with characters outside the ASCII range.
    textpart = MIMEText(BODY_TEXT.encode(CHARSET), 'plain', CHARSET)
    htmlpart = MIMEText(BODY_HTML.encode(CHARSET), 'html', CHARSET)
    
    # Add the text and HTML parts to the child container.
    msg_body.attach(textpart)
    msg_body.attach(htmlpart)
    
    # Define the attachment part and encode it using MIMEApplication.
    att = MIMEApplication(open(ATTACHMENT, 'rb').read())
    
    # Add a header to tell the email client to treat this part as an attachment,
    # and to give the attachment a name.
    att.add_header('Content-Disposition','attachment',filename=os.path.basename(ATTACHMENT))
    
    # Attach the multipart/alternative child container to the multipart/mixed
    # parent container.
    msg.attach(msg_body)
    msg.attach(att)

    #changes start from here
    strmsg = str(msg)
    body = bytes (strmsg, 'utf-8')



    
    client = boto3.client('sesv2')
    response = client.send_email(
    FromEmailAddress=SENDER,
    Destination=<span>{</span>
        'ToAddresses': [RECIPIENT]
    },
    Content=<span>{</span>
        'Raw': <span>{</span>
            'Data': body
        }
    }
    )
    print(response)
boto3_rawemailv2 ()</code></pre>
                </dd>
        </dl></awsdocs-tabs>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./send-email-formatted.html">Sending formatted email</div><div id="next" class="next-link" accesskey="n" href="./send-personalized-email-api.html">Using templates to send
            email</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SES&amp;topic_url=https://docs.aws.amazon.com/en_us/ses/latest/dg/send-email-raw.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=SES&amp;topic_url=https://docs.aws.amazon.com/en_us/ses/latest/dg/send-email-raw.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>